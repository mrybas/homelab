authelia:
  domain: khuedoan.com
  ingress:
    enabled: true
    annotations:
      cert-manager.io/cluster-issuer: letsencrypt-prod
    className: nginx
    subdomain: auth
    tls:
      enabled: true
      secret: authelia-tls
  pod:
    kind: Deployment
    extraVolumeMounts:
      - name: users-database
        mountPath: "/config/users"
        readOnly: true
    extraVolumes:
      - name: users-database
        secret:
          secretName: authelia-users
          items:
            - key: database.yaml
              path: database.yaml
  configMap:
    theme: auto
    # TODO enable 2FA
    totp:
      disable: true
    webauthn:
      disable: true
    authentication_backend:
      # TODO enable reset
      password_reset:
        disable: false
      # TODO use LDAP?
      ldap:
        enabled: false
      file:
        enabled: true
        path: /config/users/database.yaml
        search:
          email: true
    session:
      # TODO enable redis
      redis:
        enabled: false
    storage:
      # TODO use postgres
      local:
        enabled: true
      postgres:
        enabled: false
    notifier:
      # TODO switch to mail
      filesystem:
        enabled: true
        # cat this file to view notification
        filename: /config/notification.txt
      smtp:
        enabled: false
    identity_providers:
      oidc:
        # TODO Currently in beta stage.
        enabled: true
        clients:
          - id: dex
            description: Dex
            # TODO Move to secret
            secret: authdex123456!
            consent_mode: implicit
            authorization_policy: one_factor # TODO remove, use 2FA
            redirect_uris:
              - https://dex.khuedoan.com/callback
  secret:
    # TODO use global secrets
    existingSecret: ""
